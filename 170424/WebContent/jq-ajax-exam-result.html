<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<script src="js/jquery-1.12.4.min.js"></script>
<script>
	window.onload=init;
	$('document').ready(init2);
	function init(){
		//type.onchange=changeSelectType;
		alert('init');
		$('#type').bind('change',changeSelectType);
	}
	function init2(){
		//type.onchange=changeSelectType;
		alert('init2');
	}
	function changeSelectType(){
		var val = $('#type').val();
		//$('#detail option').remove();
		$('#detail').empty();
		$.ajax({
			url:"JQServlet",
			data:{type:val},
			datatype:"json",
			success:changeOptions
		});
	}
	function changeOptions(data){
		for(key in data){
			var option = new Option(data[key], key);
		    $('#detail').append($(option));
		}
	}
</script>

<style type="text/css">
	header,section,footer,aside,nav,article,figure,figcaption,hgroup{
  		display: block;
  		text-align: center;
  	}
	table{
		border: 1px solid;
		width: 960px;
	}
	td{
		width: 200px;
	}
	header{
		height: 80px;
		margin: 5px;
		padding: 10px;
		background: #cccccc;
		text-align: center;
	}

</style>

</head>
<body>
	<header>
		<h1>jQuery Ajax Exercise</h1>
	</header>
	<section>
		<form action="">
			<table>
				<tr><td>
					<select id="type">
						<option value="koreanfood">한식</option>
						<option value="saladbar">셀러드바</option>
					</select>
					</td>
					<td>
					<select id="detail">
						<option value="sodam">소담애</option>
						<option value="babnbool">밥앤불고기</option>
					</select>
					</td>
				</tr>
				<tr><td></td><td></td></tr>
			</table>
		</form>
	</section>
</body>
</html>